(function(y){var z=0,f=window.performance||{};Function.bind||(Function.prototype.bind=function(){var a=this,c=Array.prototype.slice.call(arguments),b=c.shift();return function(){return a.apply(b,c.concat(Array.prototype.slice.call(arguments)))}});var d=function(a){return function(){for(var c=document.createElement("div").style,b=a.prefix.split(","),e,d=0,f=b.length;d<f;d++){e=b[d]+a.words;if(e in c)return b[d].substr(0,b[d].length-1)}return false}},e=function(a,c){var b=c();if(b==="")return a;a=a.charAt(0).toUpperCase()+
a.substr(1);return b+a},B=function(a,c){var b=c();if(b==="")return a;a=a.charAt(0)+a.substr(1);return b+a},C=d({prefix:"r,webkitR,MozR,msR,OR",words:"equestAnimationFrame"}),v=d({prefix:"t,webkitT,MozT,msT,OT",words:"ransform"}),h=d({prefix:"t,webkitT,MozT,msT,OT",words:"ransition"}),g=d({prefix:"a,webkitA,MozA,msA,OA",words:"nimation"}),D=d({prefix:"a,-webkit-a,-moz-a,-ms-a,-o-a",words:"nimation"}),o=function(a,c,b){a.addEventListener?a.addEventListener(c,b,false):a.attachEvent("on"+c,function(){b.call(a,
window.event)})},w=function(a,c){for(var b in c)a[b]=c[b];return a},x=function(a,c){if(a.indexOf)return a.indexOf(c);for(var b=0,e;e=a[b];b++)if(e===c)return b;return-1},p=window[e("requestAnimationFrame",C)]||function(a){setTimeout(a,17)},d=document.createElement("style");d.setAttribute("id","ex_animate_style");d.type="text/css";document.getElementsByTagName("head")[0].appendChild(d);d=function(){this._init.apply(this,arguments)};d.prototype={css:document.getElementById("ex_animate_style"),_keywords:["point",
"timing"],_events:[],_method:null,_currentFrame:0,_needStop:!1,_init:function(a,c){c=c||{};this.elem=a;this.options=w({},c);this.events={};this.keyframes=[];this.keyframesString=[];this.uniqId=++z;var b=document.createElement("div").style;e("transform",v);var d=e("transition",h),f=e("animation",g);if(d in b)this.options.transition=true;if(f in b)this.options.animation=true;if(this.options.animation){b=document.createTextNode("");this.css.appendChild(b);this.keyframeElement=b}},setElement:function(a){this.elem=
a;return this},_getProperty:function(a){var c={},b;for(b in a)x(this._keywords,b)==-1&&(c[b]=a[b]);return c},keyframe:function(a){this.keyframes=this.keyframes.concat(a);return this},reset:function(){this.keyframes=[];this.elem.style[e("animation",g)]="";this.elem.style[e("transitionProperty",h)]="";this.elem.style[e("transitionTimingFunction",h)]="";this.elem.style[e("transitionDuration",h)]="";return this},start:function(a){var c=this;this._startOpt=a=this._startOpt||w({timing:"linear"},a);this._startOpt.repeat=
this._startOpt.repeat*1;var b=function(c){var a="{",b=0,e;for(e in c){b++>0&&(a=a+";");a=a+e+":"+c[e]}return a+"}"};this._currentFrame=0;var d=function(){for(var d=this.keyframes[this.keyframes.length-1].point,f="key"+this.uniqId,l="{",h=0,i;i=this.keyframes[h];h++)l=l+(Math.round(i.point/d*100)+"% "+b(this._getProperty(i)));l="@"+B("keyframes",D)+" "+f+(l+"}");if(l!=this.keyframeElement.data)this.keyframeElement.data=l;this.elem.style[e("animation",g)]=f+" "+d+"ms "+a.timing;var d=this._getProperty(this.keyframes[this.keyframes.length-
1]),t;for(t in d)this.elem.style[t]=d[t];if(this._startOpt.repeat)this.elem.style[e("animationIterationCount",g)]=this._startOpt.repeat;if(this._startOpt.delay)this.elem.style[e("animationDelay",g)]=this._startOpt.delay;if(this._startOpt.direction)this.elem.style[e("animationDirection",g)]=this._startOpt.direction;o(this.elem,e("animationEnd",g),function(a){c.events.animationEnd&&c.events.animationEnd.bind(c)(a)})},m=function(){var b=this._currentFrame,d=function(c,b){for(var d=[c,b],f=[],i=0;i<=
1;i++){var g=this._getProperty(d[i]),j;for(j in g)x(f,j)==-1&&f.push(j)}this.elem.style[e("transitionDuration",h)]=0;d=this._getProperty(c);for(j in d)this.elem.style[j]=d[j];this.elem.style[e("transitionProperty",h)]=f.join(",");this.elem.style[e("transitionTimingFunction",h)]=a.timing;a.accelerate&&(this.elem.style[e("transform",v)]="translateZ(0)");this.elem.offsetWidth;this.elem.style[e("transitionDuration",h)]=(b.point-c.point)/1E3+"s";f=this._getProperty(b);for(j in f)this.elem.style[j]=f[j]};
if(this.keyframes.length==1){var f=this.keyframes[0];f.point>0&&this.keyframes.unshift({point:0})}if(this.keyframes.length>1){var f=this.keyframes[0],g=this.keyframes[1],i=e("transitionDelay",h);d.bind(this)(f,g);if(c._startOpt.delay)c.elem.style[i]=c._startOpt.delay;b++;o(this.elem,e("transitionend",h),function(a){if(!c.keyframes[b+1]&&c._startOpt.repeat>1){b=0;/number/i.test(typeof c._startOpt.repeat)&&c._startOpt.repeat--}if(c.keyframes[b+1]){var a=c.keyframes[b],e=c.keyframes[b+1];c.elem.style[i]!==
0&&(c.elem.style[i]=0);d.bind(c)(a,e);b++}else c.events.animationEnd&&c.events.animationEnd.bind(c)(a)})}},n=function(){var a=0,b=this._startOpt.delay.replace(/[^\.\d]/g,"")*1,d=function(e,i){var h=[],g=this._getProperty(e),q=this._getProperty(i),k;for(k in g)if(q[k]!=null){var o=parseFloat(g[k].toString().replace(/[^\d+-]/g,"")),A=parseFloat(q[k].toString().replace(/[^\d+-]/g,""));h.push({prop:k,start:o,end:A,unit:(q[k]=="0"?g[k]:q[k]).toString().replace(/[\D]*\d+(?=[a-z]*)/gi,"")})}var j=function(a){for(var c=
0,b;b=h[c];c++)if(a==-1){/opacity/i.test(b.prop)&&(this.elem.style.filter="alpha(opacity="+b.end*100+")");this.elem.style[b.prop]=b.end+b.unit}else{var d=(b.start+(b.end-b.start)*a).toFixed(1);/opacity/i.test(b.prop)&&(this.elem.style.filter="alpha(opacity="+d*100+")");this.elem.style[b.prop]=d+b.unit}},m=function(){if(this.keyframes[a+1]){d.bind(this)(this.keyframes[a],this.keyframes[a+1]);a++}else if(this._startOpt.repeat>1){if(/number/i.test(typeof this._startOpt.repeat)){this._startOpt.repeat--;
a=0;m.call(this)}}else c.events.animationEnd&&c.events.animationEnd.bind(c)()};j.bind(this)(0);if(this.keyframes.length==1){e=this.keyframes[0];e.point>0&&this.keyframes.unshift({point:0})}var n=i.point-e.point,u=0,s=function(){var a=(f.now?f.now():+new Date)-r-u;j.bind(c)(a/n);if(a<n)if(c._needStop){var b=f.now?f.now():+new Date;u=0;c._continueFunc=function(){u=(f.now?f.now():+new Date)-b;p(s)}}else p(s);else{j.bind(c)(-1);m.bind(c)()}},r=0;if(this._startOpt.delay&&!this._isDelayed){if(f.now)r=f.now()+
b*1E3;else{g=new Date;r=+g.setMilliseconds(g.getMilliseconds()+b*1E3)}setTimeout(function(){c._isDelayed=true;p(s)},b*1E3)}else{r=f.now?f.now():+new Date;p(s)}};this._currentFrame=a;d.bind(this)(this.keyframes[a],this.keyframes[a+1]);a++};if(a.method)switch(a.method){case "animation":this.options.animation?d.bind(this)():console.log("your browser does not support animation method.");break;case "transition":this.options.transition?m.bind(this)():console.log("your browser does not support transition method.");
break;case "time":n.bind(this)()}else this.options.transition?m.bind(this)():this.options.animation?d.bind(this)():n.bind(this)();return this},clear:function(){for(var a=0,c=this.keyframes.length;a<c;a++){var b=this._getProperty(this.keyframes[a]),d;for(d in b)this.elem.style[d]=""}return this},on:function(a,c){a=="animationend"?this.events.animationEnd=c:o(this.elem,a,c);return this},stop:function(){this._needStop=true;this._currentFrame=0;return this},pause:function(){this._needStop=true;return this},
continuePlay:function(){if(this._needStop==true)if(this._startOpt&&this._startOpt.method=="time"){this._needStop=false;this._continueFunc&&this._continueFunc();this._continueFunc=null}else{this._needStop=false;this.clear();this.start()}return this}};y.Animate=d})(window);
